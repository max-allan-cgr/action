on: [push]
jobs:
  buildit:
    runs-on: ubuntu-latest
    env:
      DOCKER_PLATFORMS: linux/amd64,linux/arm64
    steps:
      - name: '‚ùì Setup QEMU'
        uses: docker/setup-qemu-action@v3
        # with:
        #   image: ${{ env.IMAGE_REGISTRY }}/tonistiigi/binfmt:latest
        #   platforms: all

      - name: 'üêã Set up docker buildx'
        uses: docker/setup-buildx-action@v3

      # Here is the build and push action

      - name: 'üê≥ Build & Push Image'
        uses: docker/build-push-action@v6
        id: build
        with:
          file: Dockerfile
          platforms: ${{ env.DOCKER_PLATFORMS }}
          push: false
          tags: "localhost:5000/foo:latest"

#We build for - DOCKER_PLATFORMS: linux/amd64,linux/arm64
